<?php session_start(); ?><!doctype html><html><head><meta charset="UTF-8"></head><body><?php /* --------- AFIN D'EMPECHER QU'ILS VIENNENT D'AILLEURS --------*/if ($_POST[valide]!='144f34'){		die('<META HTTP-equiv="refresh" content=0;URL=index.php>'); }//Recupération des variables - Suppression de la faille XML					$destinationDepart=htmlspecialchars($_POST[destinationDepart]);					$destinationArrive=htmlspecialchars($_POST[destinationArrive]);/* --------- AFIN De VERIFIER QUE LES 2 DESTINATIONS NE SONT PAS LES MEMES --------*/if($destinationDepart==$destinationArrive){		die('<META HTTP-equiv="refresh" content=0;URL=index.php>'); 	}	  		  // Connexion à la base de donnée		  try		  {			  $bdd= new PDO('mysql:host=localhost;dbname=TAXI', 'root', 'taxiv1_test');		  }		  catch (Exception $e)		  {				  die('Erreur :'. $e->getMessage());		  }												  		  //Recuparation des tables		  		  $result=$bdd->query("SHOW TABLES FROM TAXI LIKE 'D_%'");			  $i=0;		  while($tables= $result->fetch())		  {		  			  $table[$i]=substr($tables[0], 2);			  $i+=1;		  }			  		  $numberTable = count($table);		  		  		  //Affichage Départ/Arrivé		  echo 'Départ : '.$destinationDepart;?><BR><?php		  echo 'Arrivé : '.$destinationArrive;?><BR><?php		  		  		  // Récuparation des prix		  		  		  for ($j=0; $j<$numberTable;$j++)		  {			  $S='SELECT '.$destinationArrive.' FROM D_'.$table[$j].' WHERE nomDestination='.$destinationDepart.'';			  $result2=$bdd->prepare($S);			  $result2->execute();			  			  $temp=$result2->fetch();			  $prix[$j]=$temp[0];			  echo "Le prix pour ". $table[$j]." est : ".$prix[$j]; ?> <BR><?php		  }		  $moins_cher=array_search(min($prix),$prix);		  		  echo "la compagnie la moins cher est ". $table[$moins_cher]. " au prix de : ". $prix[$moins_cher]."e";			  					?></body></html>